- model_class = Ride
.page-header
	%h1=t '.title', :default => model_class.model_name.human.pluralize.titleize
	= link_to t('.new', :default => t("helpers.links.new")), new_ride_path, :class => 'btn btn-primary'
.col-lg-8
	- @rides.each do |ride|
	- request = @requests.find_by_ride_id(ride.id)
	- request_id = request.passenger_id if request
		.panel.panel-default
			.panel-heading
				%h1.panel-title
					="#{ride.source} --> #{ride.destination}"
					- if current_user 
						= link_to t('.edit', :default => t("helpers.links.edit")), edit_ride_path(ride), :class => 'btn btn-default btn-xs' if current_user.id == ride.user_id
						= link_to t('.destroy', :default => t("helpers.links.destroy")), ride_path(ride), :method => :delete, :data => { :confirm => t('.confirm',:default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-xs btn-danger' if current_user.id == ride.user_id
					
						- if current_user.id != ride.user.id && current_user.id != request_id
							= bootstrap_form_for(Request.new) do |f|
								= f.hidden_field :user_id, value: "#{ride.user_id}"
								= f.hidden_field :ride_id, value: "#{ride.id}"
								= f.hidden_field :passenger, value: "#{current_user.name}"
								= f.hidden_field :passenger_id, value: "#{current_user.id}"
								= f.submit "Join", class: "btn btn-success"
					- else
						= bootstrap_form_for(Request.new) do |f|
							= f.submit "Join", class: "btn btn-success"			

			.panel-body
				.row
					.col-lg-3
						%h1
							=ride.leaving_date
						-# %h2
						-# 	=ride.leaving_time
						%h2
							=number_to_currency(ride.price)
					.col-lg-5
						.row
							%h3
								%strong Name: 
								=ride.driver
						.row
							%h3
								%strong Time: 
								=ride.leaving_time
						.row
							%h3						
								%strong Spots Available: 
								=ride.spots_available
				.row					
					.col-lg-8
						%h2
							Description:					
